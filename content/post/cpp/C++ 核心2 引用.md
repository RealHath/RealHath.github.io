---
title: C++ 核心2 引用
tags: ["C++", "编程学习"]
categories: ["C++"]
date: "2020-11-14 16:54:55"
toc: true
---


# 1 引用
> https://www.runoob.com/cplusplus/cpp-references.html
> https://www.cnblogs.com/zhxmdefj/p/11185124.html

作用：给变量取别名，同一块内存不同变量名

语法：数据类型 &别名 = 原名

## 1.1 与指针的区别
- 不存在空引用。引用必须连接到一块合法的内存。
- 一旦引用被初始化为一个对象，就不能被指向到另一个对象。指针可以在任何时候指向到另一个对象。
- 引用必须在创建时被初始化。指针可以在任何时间被初始化。

## 1.2 注意事项
- 引用必须初始化
```cpp
int& c = a;     //正确
int& c;         //错误
```

- 引用在初始化后，不可以改变
```cpp
int& c = a;
c = b;          //不是改变引用，而是将b的值给到c
```

## 1.3 引用做函数参数
作用：函数传参时，可以利用引用让形参当作实参

优点：可以简化指针修改实参
```cpp
void fun(int& a)
{
    //引用传递，原来的值会被改变
}
```

## 1.4 引用做函数的返回值
注意：
- 不要返回局部变量的引用

因为局部变量存放在栈区
```cpp
int& fun()
{
    int a = 10;
    return a;
}
```

- 函数的调用可以作为左值
```cpp
int& fun()
{
    static int a = 10;
    return a;
}

fun() = 1000;       //左值，等号左边
```

## 1.5 引用的本质
> 文档：C++基础 3 指针.md
链接：http://note.youdao.com/noteshare?id=77a4b1527ac9f1473d36a7ac229dd4fb&sub=FD462E1F796E432EB7FC571D65940C07

引用的本质在C++内部实现是一个{{< highlight >}}指针常量{{< /highlight >}}

## 1.6 常量引用
用来修饰形参，防止误操作

```cpp
int& ref = 10;      //错误

const int& ref = 10;//正确，编译器创建临时空间存放10，然后引用这块内存

void fun(const int& a); //防止误操作
```